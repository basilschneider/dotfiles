#!/usr/bin/env bash

# Moves file to a folder (recycle bin), instead of deleting them

# Bin folder is at a different location for different servers
# Simply setting it to ~/scratch/trash will have the effect,
# that sudo trash will put it into /root/scratch/trash
if [[ "$HOSTNAME" == lxplus* ]] || [[ "$HOSTNAME" == openstack0* ]]; then
    bin=/afs/cern.ch/user/b/bschneid/scratch/trash
elif [[ "$HOSTNAME" == cmslpc* ]]; then
    bin=/uscms_data/d1/bschneid/scratch/trash
elif [[ "$HOSTNAME" == rulinux* ]]; then
    bin=/home/bschneid/scratch/trash
elif [[ "$HOSTNAME" == nafhh* ]]; then
    bin=/afs/desy.de/user/b/bschneid/scratch/trash
else
    bin=/home/basil/scratch/trash
fi

for file; do
    # Get variables
    file=${file%/}
    full=$(fullPath "$file")
    folder=${full%/*}
    # Create parent directories in bin folder
    mkdir -p "${bin}${folder}"
    # Move files/folders to bin folder
    mv -i "${full}" "${bin}${folder}"
done
