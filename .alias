#!/usr/bin/env bash

alias ls='ls --color=auto'
alias ll='ls -l'
alias la='ls -a'
alias lla='ls -al'
alias grep='grep --color=auto'
alias egrep='egrep --color=auto'
alias less='less -N'
alias diff='diff -u'

rgrep(){
    local pattern="${1:-pattern}"
    shift 1
    grep -Ir --exclude-dir=.svn --exclude=*.make --exclude=*.d "${pattern}" "$@"
}

alias arcsetup='mywd=`pwd` && cd /terabig/atlsoft/LocalSoft/nordugrid-arc/nordugrid-arc-ui-current && source setup.sh && cd $mywd && arcproxy --voms atlas:/atlas/ch -c validityPeriod=96h || echo "failed to set up arcsub"'

mkcd(){
    mkdir "${1}" && cd "${1}"
}

setupHistFitter(){
    pwd=$PWD && cd /terabig/schneider/SusyFitter/HistFitter/HistFitter-00-00-33_SLC6 && . setup.sh && cd $pwd && echo "done." || echo "it didn't work"
}

alias setupRF='. /terabig/atlsoft/LocalSoft/glite/glite-UI-current/external/etc/profile.d/grid-env.sh && unset GT_PROXY_MODE && export DPM_HOST=dpm.lhep.unibe.ch && export DPNS_HOST=dpm.lhep.unibe.ch && voms-proxy-init -voms atlas:/atlas/ch || echo "Failed to set up RFIO."'

# Always exec startx, so if the GUI crashes, the terminal exits
alias sx='exec startx'

# Start keepass with my kdb file
alias mykeepass="keepass ~/Documents/keepass/all.kdbx"

# My favourite format for date (used for the logs)
mydate(){
    date +"%F_%H-%M-%S"
}
export -f mydate

# Always show Monday as first day of the week in cal
alias cal="cal -m"

# Function that checkes if an element is in an array
# Usage: contains "${arr1[@]}" "${arr2[@]}" element
# Returns true when element is in arr1 or arr2, otherwise returns false
function contains(){
    # Number of arguments
    local n=$#
    # Value of element to be searched
    local value=${!n}
    # Loop over arrays (but not over element (last positional argument))
    for ((i=1;i < $#;i++)){
        if [ "${!i}" == "${value}" ]; then
            echo "true"
            return 0
        fi
    }
    echo "false"
    return 1
}

# Always start library in ncmpcpp
alias mp="ncmpcpp -s media_library"

eosSetup(){
    . /afs/cern.ch/project/eos/installation/atlas/etc/setup.sh
}
